<div class="container">
  <div class="jumbotron">
    <h1>Fixed Deposit</h1> 
  </div>
  
  <img class="img-responsive" src="http://indianmoney.com/images/article-images/why-invest-in-corporate-fixed-deposits.jpg">
  <h3>A fixed deposit (FD) is a financial instrument provided by banks which provides investors with a higher rate of interest than a regular savings account, until the given maturity date.
	</h3> 
	<br>
	<h4>
		For example, bank come to you, and offered you a package which is
	</h4>

		<div class="col-sm-4"></div>
		<div class="col-sm-8">
		<h4>"Borrow us RM1000 for 3 months, in return I will give you extra RM10"</h4>
		</div>
		

		<h4>
		If you agreed with this, you are not allowed to access the money until maturity date(which is 3 months).
		If not, you will only got back your capital which is RM1000 or less because some bank might charge penalty upon termination.
		</h4>

 <div class="container-fluid">
  <div class="text-center">
    <h2><strong>Decide your FD.</strong></h2>
  </div>


 <div class="row slideanim">
   <div class="col-sm-4 col-xs-12">
     <div class="panel panel-default text-center">
        <div class="jumbotron">
   			<h1>3 Months</h1> 
  		</div>
  		<h2 id="3months"><%= "Rate : #{@initial_fixed_deposit_rates[0]}%" %></h2>
     </div>
   </div>


  
   <div class="col-sm-4 col-xs-12">
     <div class="panel panel-default text-center">
        <div class="jumbotron">
   			<h1>6 Months</h1> 
  		</div>
  		<h2 id="6months"><%= "Rate : #{@initial_fixed_deposit_rates[1]}%" %></h2>
     </div>
   </div>


 
   <div class="col-sm-4 col-xs-12">
     <div class="panel panel-default text-center">
        <div class="jumbotron">
   			<h1>9 Months</h1> 
  		</div>
  		<h2 id="9months"><%= "Rate : #{@initial_fixed_deposit_rates[2]}%" %></h2>
     </div>
   </div>
 </div>


	<div class="form-group">
       <input type="integer">
       <input type="submit" value="Deposit">
    </div>


<button>Button</button>
<button id="start">Start</button>
<button id="stop">Stop</button>

<br><br>

<div class="container">
  <div class="progress progress-striped">
    <div class="progress-bar progress-bar-success" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){

    $('button').click(function(){
      
    });

    var timer = null;
    var progress = null;
    var count = 10;
    var progressbar = 0;

    function displayTime(){
      var min = Math.floor((count / 60) % 60)
      var sec = count % 60
      $('#time').text(min+':'+sec);
    }

    $('#start').click(function(){
      
      progress = setInterval(function(){
        progressbar += 1;
        $('.progress-bar').attr("style", "width:"+progressbar+"%")
        $('.progress-bar').text(progressbar+"%")
        if (progressbar >= 100){
          $('.progress-bar').addClass("progress-bar-success")
          clearInterval(progress);
          $.ajax({
            method: "post",
            url: "/refresh_fd_rates",
            beforeSend: function(xhr){xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
            dataType: "json",
            success: function(data){
              $('#3months').text("Rate : "+data[0]+"%");
              $('#6months').text("Rate : "+data[1]+"%");
              $('#9months').text("Rate : "+data[2]+"%");
            }
          });
        }
      },50)

      timer = setInterval(function(){
        count-=1;
        displayTime();
        if (count <= 0){
          clearInterval(timer);
        }
      },1000)
      
      

    });

    $('#stop').click(function(){
      clearInterval(progress);
      clearInterval(timer);
    });


    



    
    
  });
</script>


</div>